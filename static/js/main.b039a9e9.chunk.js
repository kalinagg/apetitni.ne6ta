(window.webpackJsonpapetitnine6ta=window.webpackJsonpapetitnine6ta||[]).push([[0],{45:function(e,t,a){e.exports=a.p+"static/media/logo.a68b7008.svg"},62:function(e,t,a){e.exports=a(78)},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n,i=a(0),c=a.n(i),r=a(8),s=a.n(r),l=(a(67),a(12)),o=a(9),d=a(15),u=a(16),h=a(17),p=a(45),m=a.n(p),b=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("img",{src:m.a,className:"logo",alt:"Apetitni Ne6ta"})}}]),t}(i.Component),f=(a(68),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement(b,null),c.a.createElement("p",{className:"footer-text"},"\u0423\u0435\u0431 \u0441\u0430\u0439\u0442 \u0437\u0430 \u043d\u043e\u0432\u0438 \u0438 \u0441\u0442\u0430\u0440\u0438 \u0440\u0435\u0446\u0435\u043f\u0442\u0438."))}}]),t}(i.Component)),g=a(21),v=a(10),O=(a(69),a(4)),E=a(3),j=a(119),k=a(110),y=a(114),S=a(115),C=a(116),w=a(47),R=a.n(w),N=a(50),I=a.n(N),x=a(51),D=a.n(x),L=a(49),A=a.n(L),V=a(48),B=a.n(V),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).recipeBeforeChange={},a.state=e.recipe,a.handleChangeTitle=a.handleChangeTitle.bind(Object(v.a)(a)),a.handleChangeIngredients=a.handleChangeIngredients.bind(Object(v.a)(a)),a.handleChangeInstructions=a.handleChangeInstructions.bind(Object(v.a)(a)),a.uploadImage=a.uploadImage.bind(Object(v.a)(a)),a.handleUndo=a.handleUndo.bind(Object(v.a)(a)),a.handleEdit=a.handleEdit.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleChangeIngredients",value:function(e){this.setState({ingredients:e.target.value.split("\r\n")})}},{key:"handleChangeInstructions",value:function(e){this.setState({instructions:e.target.value})}},{key:"uploadImage",value:function(e){var t=this,a=new FormData;return a.append("image",e.target.files[0]),fetch("./upload",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){t.setState({img:e[0]})}))}},{key:"handleEdit",value:function(e){this.toggleEditMode(e),this.recipeBeforeChange=this.state}},{key:"handleUndo",value:function(e){this.toggleEditMode(e),this.setState(this.recipeBeforeChange)}},{key:"toggleEditMode",value:function(e){var t=e.currentTarget.closest(".recipe");t.classList.toggle("activate-edit-mode"),t.querySelectorAll("input, textarea").forEach((function(e){return e.toggleAttribute("disabled")}))}},{key:"render",value:function(){var e=this,t=this.state,a=this.props.classes;return c.a.createElement(k.a,{className:Object(E.a)(a.card,"recipe"),key:t.id},c.a.createElement(y.a,{className:Object(E.a)(a.cardContent)},c.a.createElement("div",{className:"recipe-container"},c.a.createElement("div",{className:"recipe-image-container"},c.a.createElement("label",{htmlFor:"image-upload-"+t.id},c.a.createElement("img",{className:"recipe-image",src:t.img,alt:t.title})),c.a.createElement("input",{disabled:!0,type:"file",name:"image",id:"image-upload-"+t.id,className:"hidden",onChange:function(t){return e.uploadImage(t)}})),c.a.createElement("div",{className:"recipe-input-container"},c.a.createElement(S.a,{className:Object(E.a)(a.cardActions),disableSpacing:!0},c.a.createElement(C.a,{className:"edit-icon","aria-label":"Edit",onClick:function(t){return e.handleEdit(t)}},c.a.createElement(R.a,null)),c.a.createElement(C.a,{className:"undo-icon","aria-label":"Undo",onClick:function(t){return e.handleUndo(t)}},c.a.createElement(B.a,null)),c.a.createElement(C.a,{className:"save-icon","aria-label":"Save",onClick:function(a){return e.props.handleSubmit(a,t)}},c.a.createElement(A.a,null)),c.a.createElement(C.a,{className:"share-icon","aria-label":"Share"},c.a.createElement(I.a,null)),c.a.createElement(C.a,{className:"delete-icon","aria-label":"Delete",onClick:function(a){return e.props.handleDelete(t.id,a)}},c.a.createElement(D.a,null))),c.a.createElement("div",{className:"recipe-input"},c.a.createElement(j.a,{disabled:!0,margin:"dense",fullWidth:!0,size:"small",className:"input-field title",id:"title-"+t.id,name:"title-"+t.id,label:"Title",variant:"outlined",value:t.title,onChange:function(t){return e.handleChangeTitle(t)}})),c.a.createElement("hr",{className:"devider"}),c.a.createElement("div",{className:"recipe-input"},c.a.createElement(j.a,{disabled:!0,margin:"dense",multiline:!0,fullWidth:!0,className:"input-field",id:"ingredients-"+t.id,name:"ingredients-"+t.id,label:"Ingredients",variant:"outlined",value:t.ingredients.join("\r\n"),onChange:function(t){return e.handleChangeIngredients(t)}})))),c.a.createElement("div",{className:"recipe-input"},c.a.createElement(j.a,{disabled:!0,margin:"dense",multiline:!0,fullWidth:!0,className:"input-field instructions",id:"instructions-"+t.id,name:"instructions-"+t.id,label:"Instructions",variant:"outlined",value:t.instructions,onChange:function(t){return e.handleChangeInstructions(t)}}))))}}]),t}(i.Component),T=Object(O.a)((function(e){return{card:{boxShadow:"3px 5px 4px #bbb",borderRadius:0,border:"1px solid #eee"},cardContent:{"&:last-child":{paddingBottom:"16px"}},cardActions:{justifyContent:"right",padding:0}}}))(M),U=a(53),z=a.n(U),F=a(117),W=(a(74),a(52)),J=a.n(W),q=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"header-container"},c.a.createElement(C.a,{className:Object(E.a)(this.props.listView&&"back-arrow-hidden"),onClick:this.props.showRecipeList},c.a.createElement(J.a,{style:{color:"#666"}})),c.a.createElement(b,null),c.a.createElement(F.a,{className:Object(E.a)("add-icon"),size:"small",color:"secondary","aria-label":"Add Recipe",style:{background:"#f33"},onClick:function(){return e.props.handleAddRecipe()}},c.a.createElement(z.a,null)))}}]),t}(i.Component),P=(a(75),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.recipe,a=this.props.classes;return c.a.createElement(k.a,{className:Object(E.a)(a.card,"recipe-thumbnail"),onClick:function(){return e.props.showRecipeDetail(t)}},c.a.createElement(y.a,{className:Object(E.a)(a.cardContent)},c.a.createElement("div",{className:"recipe-image-container"},c.a.createElement("img",{className:"recipe-image",src:t.img,alt:t.title})),c.a.createElement("h2",null,t.title)))}}]),t}(i.Component)),H=Object(O.a)((function(e){return{card:{boxShadow:"3px 5px 4px #bbb",borderRadius:0,border:"1px solid #eee"},cardContent:{"&:last-child":{paddingBottom:"16px"}}}}))(P),G=(a(76),a(122)),K=a(118),Q=a(120),X=(a(77),a(54)),Y=a.n(X),Z=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.open,r=t.severity,s=t.message,l=t.undo,o=t.closeSnackbar;return l&&(e=c.a.createElement(K.a,{color:"inherit",size:"small"},"Undo")),c.a.createElement(G.a,{open:n,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:o,autoHideDuration:6e3},c.a.createElement(Q.a,{onClose:o,action:c.a.createElement(i.Fragment,null,e,c.a.createElement(C.a,{onClick:o,"aria-label":"close",color:"inherit",size:"small"},c.a.createElement(Y.a,{fontSize:"inherit"}))),className:Object(E.a)(a.root),elevation:6,variant:"filled",severity:r},s))}}]),t}(i.Component),$=Object(O.a)((function(e){return{root:{borderRadius:"2px"}}}))(Z);!function(e){e.Success="success",e.Info="info",e.Warning="warning",e.Error="error"}(n||(n={}));var _=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).selectedRecipe={},a.state={isLoaded:!1,recipes:[],listView:!0,snackbarOpen:!1,snackbarSeverity:n.Error,snackbarMessage:"",snackbarUndo:!1},a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.handleDelete=a.handleDelete.bind(Object(v.a)(a)),a.handleAddRecipe=a.handleAddRecipe.bind(Object(v.a)(a)),a.showRecipeDetail=a.showRecipeDetail.bind(Object(v.a)(a)),a.showRecipeList=a.showRecipeList.bind(Object(v.a)(a)),a.closeSnackbar=a.closeSnackbar.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getRecipes()}},{key:"getRecipes",value:function(){var e=this;fetch("./recipes").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,recipes:t})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"updateRecipeById",value:function(e,t){var a=t.findIndex((function(t){return t.id===e.id}));if(a<0)throw new Error("Recipe not found:"+e.id);var n=Object.assign({},e),i=Object(g.a)(t);return i.splice(a,1,n),i}},{key:"saveRecipes",value:function(e,t,a){var i=this;return fetch("./recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Something went wrong, please try again later!");i.openSnackbar(n.Success,t,a)})).catch((function(e){i.openSnackbar(n.Error,e.message,!1)}))}},{key:"openSnackbar",value:function(e,t,a){this.setState({snackbarOpen:!0,snackbarSeverity:e,snackbarMessage:t,snackbarUndo:a})}},{key:"closeSnackbar",value:function(){this.setState({snackbarOpen:!1})}},{key:"handleSubmit",value:function(e,t){var a=this,n=this.updateRecipeById(t,this.state.recipes);this.saveRecipes(n,"Recipe is saved!",!1).then((function(){a.setState({recipes:n})}))}},{key:"deleteRecipeById",value:function(e,t){return t.filter((function(t){return t.id!==e}))}},{key:"handleDelete",value:function(e,t){var a=this.deleteRecipeById(e,this.state.recipes);this.setState({recipes:a}),this.showRecipeList(),this.saveRecipes(a,"Recipe is removed!",!0)}},{key:"handleAddRecipe",value:function(){var e=this.state.recipes,t={id:e.length?Math.max.apply(Math,Object(g.a)(e.map((function(e){return e.id}))))+1:1,title:"",instructions:"",img:"img-food/default.jpg",ingredients:[]};this.setState({recipes:[t].concat(Object(g.a)(e))})}},{key:"showRecipeDetail",value:function(e){this.setListView(),this.selectedRecipe=e}},{key:"showRecipeList",value:function(){this.setListView()}},{key:"setListView",value:function(){this.setState({listView:!this.state.listView})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.error,i=a.isLoaded;return n?c.a.createElement("div",null,"Error: ",n.message):i?(e=this.state.listView?c.a.createElement("div",{className:"recipe-list-container"},this.state.recipes.map((function(e){return c.a.createElement(H,{key:e.id,recipe:e,showRecipeDetail:t.showRecipeDetail})}))):c.a.createElement(T,{recipe:this.selectedRecipe,key:this.selectedRecipe.id,handleSubmit:this.handleSubmit,handleDelete:this.handleDelete}),c.a.createElement(c.a.Fragment,null,c.a.createElement(q,{listView:this.state.listView,showRecipeList:this.showRecipeList,handleAddRecipe:this.handleAddRecipe}),e,c.a.createElement($,{open:this.state.snackbarOpen,severity:this.state.snackbarSeverity,message:this.state.snackbarMessage,undo:this.state.snackbarUndo,closeSnackbar:this.closeSnackbar}))):c.a.createElement("div",null,"Loading ...")}}]),t}(i.Component),ee=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(_,null),c.a.createElement(f,null))}}]),t}(i.Component);s.a.render(c.a.createElement(ee,null),document.querySelector(".root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.b039a9e9.chunk.js.map